# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ Friend Bot

## –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 1. üïê –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –≤ –¥–∞—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–µ–∫–∏–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–µ–∫–∏–Ω–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∞—Å—å –±–µ–∑ —É—á–µ—Ç–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –≤ Telegram –±–æ—Ç–µ, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –≤ Django –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –º–æ—Å–∫–æ–≤—Å–∫–∏–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å.

**–†–µ—à–µ–Ω–∏–µ:** 
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `pytz` –≤ Telegram –±–æ—Ç
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `update_daily_checkin` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `datetime.now(moscow_tz)` –≤–º–µ—Å—Ç–æ `datetime.now()`
- –î–æ–±–∞–≤–ª–µ–Ω `pytz` –≤ `requirements.txt` –¥–ª—è –æ–±–æ–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `telegram_bot/bot.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `update_daily_checkin`
- `telegram_bot/requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω `pytz>=2023.3`
- `django_app/requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω `pytz>=2023.3`

### 2. üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–º–µ–Ω–µ –∑–≤–∞–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–º–µ–Ω–µ –∑–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —á–∞—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±—Ä–∞–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –≤—ã–∑–æ–≤ `update_rank()` –≤ API views
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `django_app/friend_bot/api_views.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 3. üìä –ö–æ–º–∞–Ω–¥–∞ stat –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≥—Ä—É–ø–ø–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–∞–Ω–¥–∞ `/stat` –Ω–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∞ –≤ —á–∞—Ç–µ –≥—Ä—É–ø–ø—ã.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–º–∞–Ω–¥—ã stat
- –ö–æ–º–∞–Ω–¥–∞ —É–∂–µ –∏–º–µ–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–∞ —á–∞—Ç–∞

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `telegram_bot/bot.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–∞–Ω–¥—É stat

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –¢–µ—Å—Ç —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
```bash
# –í Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
cd django_app
python manage.py shell

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ timezone.now() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è
from django.utils import timezone
print(timezone.now())
```

### –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å–º–µ–Ω–µ –∑–≤–∞–Ω–∏—è
```bash
# –í Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
cd django_app
python manage.py test_rank_notifications
```

### –¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥—ã stat
```bash
# –í Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
cd django_app
python manage.py test_stat_command

# –í Telegram –±–æ—Ç–µ
# –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É /stat
```

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –õ–æ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö, –≥—Ä—É–ø–ø–∞—Ö –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω traceback –¥–ª—è –ª—É—á—à–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ç–µ—Å—Ç `test_rank_notifications.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –£–ª—É—á—à–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ—Å—Ç `test_stat_command.py`

## üöÄ –ó–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

1. **–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   # –í Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
   cd django_app
   pip install -r requirements.txt
   
   # –í Telegram –±–æ—Ç–µ
   cd telegram_bot
   pip install -r requirements.txt
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   docker-compose down
   docker-compose up -d
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   ```bash
   # Django
   docker-compose logs django_app
   
   # Telegram –±–æ—Ç
   docker-compose logs telegram_bot
   ```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –¥–∞—Ç—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –º–æ—Å–∫–æ–≤—Å–∫–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–º–µ–Ω–µ –∑–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞
- –ö–æ–º–∞–Ω–¥–∞ `/stat` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–∞—Ö –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
